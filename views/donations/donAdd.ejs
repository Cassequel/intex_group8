<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Make a Donation | Ella Rises</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="icon" type="image/png" href="/images/favicon.png" />
<link rel="stylesheet" href="/styles/styles.css" />
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
<style>
    .donation-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1.5rem;
        margin: 2rem 0;
        max-width: 800px;
        margin-left: auto;
        margin-right: auto;
    }
    
    .donation-option {
        background: white;
        border: 3px solid #e0e0e0;
        border-radius: 12px;
        padding: 2rem;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
    }
    
    .donation-option:hover {
        border-color: #666;
        transform: translateY(-4px);
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    
    .donation-option.selected {
        border-color: #2c5f2d;
        background: #f0f8f0;
        box-shadow: 0 4px 16px rgba(44, 95, 45, 0.2);
    }
    
    .donation-option .amount {
        font-size: 2.5rem;
        font-weight: 700;
        color: #2c5f2d;
        margin: 0;
    }
    
    .donation-option .label {
        font-size: 0.9rem;
        color: #666;
        margin-top: 0.5rem;
    }
    
    .custom-amount-wrapper {
        display: none;
        margin-top: 1rem;
    }
    
    .custom-amount-wrapper.active {
        display: block;
    }
    
    .custom-input {
        font-size: 1.5rem;
        padding: 1rem;
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        width: 100%;
        text-align: center;
        font-weight: 600;
    }
    
    .custom-input:focus {
        border-color: #2c5f2d;
        outline: none;
    }
    
    .confirm-section {
        text-align: center;
        margin-top: 2rem;
    }
    
    .btn--confirm {
        font-size: 1.2rem;
        padding: 1rem 3rem;
    }
    
    .selected-amount-display {
        font-size: 1.5rem;
        font-weight: 600;
        color: #2c5f2d;
        margin-bottom: 1rem;
    }
</style>
</head>
<body>
<!-- NAVBAR -->
<%- include('../partials/navbar') %>

<!-- HERO -->
<section class="hero">
<div class="hero-overlay"></div>
<div class="container hero-content">
<p class="eyebrow">Give</p>
<h1>Make a Donation</h1>
<p class="hero-subtitle">Select an amount to support Ella Rises</p>
</div>
</section>

<!-- DONATION SELECTION -->
<section class="section section--light">
<div class="container">
<div class="form-card">
<% if (typeof error_message !== "undefined" && error_message) { %>
<div class="alert alert--error"><%= error_message %></div>
<% } %>

<form id="donationForm" method="POST" action="/donations/select">
<div class="donation-grid">
<div class="donation-option" data-amount="5">
<p class="amount">$5</p>
<p class="label">Small Gift</p>
</div>
<div class="donation-option" data-amount="25">
<p class="amount">$25</p>
<p class="label">Supporter</p>
</div>
<div class="donation-option" data-amount="50">
<p class="amount">$50</p>
<p class="label">Contributor</p>
</div>
<div class="donation-option" data-amount="custom">
<p class="amount">$?</p>
<p class="label">Custom Amount</p>
</div>
</div>

<div class="custom-amount-wrapper" id="customAmountWrapper">
<input type="number" 
                       id="customAmountInput" 
                       class="custom-input" 
                       placeholder="Enter amount" 
                       step="0.01" 
                       min="1" />
</div>

<input type="hidden" name="donation_amount" id="donationAmountInput" required />

<div class="confirm-section">
<div id="selectedAmountDisplay" class="selected-amount-display" style="display: none;"></div>
<button type="submit" class="btn btn--primary btn--large btn--confirm" id="confirmBtn" disabled>
Confirm Donation
</button>
</div>
</form>
</div>
</div>
</section>

<script>
const navToggle = document.querySelector(".nav-toggle");
const navLinks = document.querySelector(".nav-links");
navToggle.addEventListener("click", () => {
    navLinks.classList.toggle("nav-links--open");
    navToggle.classList.toggle("nav-toggle--open");
});

// Donation selection logic
const donationOptions = document.querySelectorAll('.donation-option');
const customWrapper = document.getElementById('customAmountWrapper');
const customInput = document.getElementById('customAmountInput');
const donationAmountInput = document.getElementById('donationAmountInput');
const confirmBtn = document.getElementById('confirmBtn');
const selectedAmountDisplay = document.getElementById('selectedAmountDisplay');
let selectedAmount = null;

donationOptions.forEach(option => {
    option.addEventListener('click', function() {
        // Remove selected class from all options
        donationOptions.forEach(opt => opt.classList.remove('selected'));
        
        // Add selected class to clicked option
        this.classList.add('selected');
        
        const amount = this.dataset.amount;
        
        if (amount === 'custom') {
            customWrapper.classList.add('active');
            customInput.focus();
            selectedAmount = null;
            donationAmountInput.value = '';
            confirmBtn.disabled = true;
            selectedAmountDisplay.style.display = 'none';
        } else {
            customWrapper.classList.remove('active');
            selectedAmount = amount;
            donationAmountInput.value = amount;
            confirmBtn.disabled = false;
            selectedAmountDisplay.textContent = `You're donating $${amount}`;
            selectedAmountDisplay.style.display = 'block';
        }
    });
});

// Handle custom amount input
customInput.addEventListener('input', function() {
    const customValue = parseFloat(this.value);
    if (customValue && customValue > 0) {
        selectedAmount = customValue;
        donationAmountInput.value = customValue;
        confirmBtn.disabled = false;
        selectedAmountDisplay.textContent = `You're donating $${customValue.toFixed(2)}`;
        selectedAmountDisplay.style.display = 'block';
    } else {
        selectedAmount = null;
        donationAmountInput.value = '';
        confirmBtn.disabled = true;
        selectedAmountDisplay.style.display = 'none';
    }
});

// Prevent form submission if no amount selected
document.getElementById('donationForm').addEventListener('submit', function(e) {
    if (!donationAmountInput.value) {
        e.preventDefault();
        alert('Please select or enter a donation amount');
    }
});
</script>
</body>
</html>